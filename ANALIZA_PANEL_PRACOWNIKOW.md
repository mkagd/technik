# üìã KOMPLEKSOWA ANALIZA PANELU ZARZƒÑDZANIA PRACOWNIKAMI

## üéØ CEL DOKUMENTU
Analiza ca≈Çego systemu pracownik√≥w w projekcie, aby okre≈õliƒá co jest potrzebne w nowym panelu zarzƒÖdzania.

---

## 1Ô∏è‚É£ OBECNA STRUKTURA DANYCH PRACOWNIKA

### Plik: `data/employees.json` (8 pracownik√≥w)

```json
{
  "id": "EMP25189001",
  "name": "Jan Kowalski",
  "email": "jan.kowalski@techserwis.pl",
  "phone": "+48 123 456 789",
  "specializations": ["Serwis AGD", "Naprawa pralek"],
  "isActive": true,
  "dateAdded": "2025-07-08T22:25:15.180Z",
  "address": "Warszawa",
  "workingHours": "8:00-16:00",
  "experience": "5 lat",
  "rating": 4.8,
  "completedJobs": 245,
  
  "agdSpecializations": {
    "primaryCategory": "AGD",
    "devices": [
      {
        "type": "pralka",
        "brands": ["Samsung", "LG"],
        "experienceYears": 8,
        "level": "beginner|advanced|expert",
        "certifications": ["Samsung Service Professional"]
      }
    ],
    "specialSkills": ["Diagnostyka elektroniczna"]
  },
  
  "equipment": {
    "personalTools": ["Multimetr Fluke 117"],
    "specializedEquipment": [],
    "mobileWorkshop": true,
    "toolsValue": 6301,
    "lastInventoryCheck": "2025-08-21"
  },
  
  "vehicle": {
    "make": "Ford",
    "model": "Sprinter",
    "year": 2021,
    "licensePlate": "WA76927",
    "fuelType": "diesel",
    "capacity": { "volume": "15m¬≥", "weight": "1716kg" },
    "mileage": 41339,
    "nextService": "2025-10-18"
  },
  
  "serviceArea": {
    "primaryCity": "Warszawa",
    "radius": 30,
    "preferredDistricts": ["Mokot√≥w", "Ursyn√≥w"],
    "maxDistanceKm": 40,
    "avoidAreas": ["Centrum w godzinach szczytu"],
    "travelTimePreference": "minimize"
  },
  
  "performance": {
    "monthlyStats": {
      "completedOrders": 32,
      "averageTimePerOrder": 139,
      "customerSatisfaction": "4.7",
      "onTimeArrival": 98,
      "firstTimeFixRate": 74
    },
    "specialtyMetrics": {
      "agdRepairSuccess": 82,
      "complexRepairCapability": 68
    }
  },
  
  "availability": {
    "vacationDays": { "total": 26, "used": 0, "planned": [] },
    "overtime": { "maxHoursPerWeek": 10, "currentWeekHours": 5 },
    "emergencyAvailability": true
  },
  
  "certifications": {
    "current": [
      {
        "name": "Uprawnienia elektryczne do 1kV",
        "issuer": "UDT",
        "validUntil": "2026-05-15"
      }
    ]
  },
  
  "metadata": {
    "createdAt": "2025-07-08T22:25:15.180Z",
    "updatedAt": "2025-09-30T20:21:02.155Z",
    "version": 2,
    "profileCompleteness": 95
  },
  
  "repairTimes": {
    "pralka": 29,
    "lod√≥wka": 34,
    "zmywarka": 38,
    // ... inne urzƒÖdzenia
  },
  
  "builtInWorkTimes": {
    "demonta≈º": 10,
    "monta≈º": 10,
    "trudnaZabudowa": 30
  }
}
```

---

## 2Ô∏è‚É£ GDZIE SYSTEM PRACOWNIK√ìW JEST U≈ªYWANY

### A. System Przydzia≈Çu Zlece≈Ñ
**Pliki:** `pages/api/order-assignment.js`, `pages/zlecenie-szczegoly.js`

**Co siƒô dzieje:**
- Rƒôczne przydzielanie zlece≈Ñ do pracownika
- Automatyczne znajdowanie najlepszego pracownika (na podstawie specjalizacji, lokalizacji)
- Obliczanie obciƒÖ≈ºenia pracownika
- Tracking workload (ile zlece≈Ñ ma przypisanych)

**Potrzebne dane:**
- ‚úÖ Lista wszystkich pracownik√≥w
- ‚úÖ Specjalizacje
- ‚úÖ Lokalizacja/obszar dzia≈Çania
- ‚úÖ Aktywno≈õƒá (isActive)
- ‚úÖ ObciƒÖ≈ºenie (ile zlece≈Ñ aktualnie)

---

### B. Intelligent Planner (Planer Tygodniowy)
**Pliki:** `components/IntelligentWeekPlanner.js`, `pages/intelligent-planner.js`

**Co siƒô dzieje:**
- Wyb√≥r pracownika z dropdown
- Planowanie wizyt dla konkretnego pracownika
- Przerzucanie wizyt miƒôdzy pracownikami
- Optymalizacja tras
- Osobne plany dla ka≈ºdego pracownika

**Potrzebne dane:**
- ‚úÖ Lista aktywnych pracownik√≥w
- ‚úÖ Imiƒô i nazwisko
- ‚úÖ ID pracownika
- ‚úÖ Specjalizacje (do filtrowania zlece≈Ñ)
- ‚úÖ Lokalizacja bazowa

---

### C. Kalendarz Pracownika
**Pliki:** `pages/kalendarz-pracownika-prosty.js`, `pages/api/employee-calendar.js`

**Co siƒô dzieje:**
- Pracownik widzi sw√≥j harmonogram
- Ustawia godziny pracy (work slots)
- Oznacza dostƒôpno≈õƒá/niedostƒôpno≈õƒá
- Zaznacza przerwy
- System automatycznie generuje time slots

**Potrzebne dane:**
- ‚úÖ workingHours (domy≈õlne godziny pracy)
- ‚úÖ Schedule (harmonogram per dzie≈Ñ)
- ‚úÖ Time slots (szczeg√≥≈Çowe 30-min sloty)
- ‚úÖ Availability settings

---

### D. System Czas√≥w Napraw
**Pliki:** `pages/ustawienia-czasow.js`, `utils/repairTimeCalculator.js`

**Co siƒô dzieje:**
- Admin ustawia indywidualne czasy napraw dla ka≈ºdego pracownika
- Ka≈ºdy pracownik ma swoje czasy dla r√≥≈ºnych urzƒÖdze≈Ñ
- System oblicza czas wizyty na podstawie:
  - Bazowego czasu pracownika dla urzƒÖdzenia
  - Czas√≥w dodatkowych (zabudowa)
  - Rƒôcznych korekt

**Potrzebne dane:**
- ‚úÖ `repairTimes` (czasy dla ka≈ºdego typu urzƒÖdzenia)
- ‚úÖ `builtInWorkTimes` (czasy pracy z zabudowƒÖ) ‚≠ê **NOWO DODANE!**
- ‚úÖ Poziom do≈õwiadczenia (level: beginner/advanced/expert)

---

### E. Panel Pracownika
**Pliki:** `pages/pracownik-panel.js`, `pages/pracownik-logowanie.js`

**Co siƒô dzieje:**
- Pracownik loguje siƒô (email + has≈Ço)
- Widzi swoje przypisane zlecenia
- Widzi statystyki
- Widzi sw√≥j kalendarz
- Aktualizuje status zlece≈Ñ

**Potrzebne dane:**
- ‚úÖ Email, has≈Ço (auth)
- ‚úÖ Przypisane zlecenia (orders where assignedTo = employeeId)
- ‚úÖ Statystyki (completedJobs, rating)

---

### F. Wizyty i Zlecenia
**Pliki:** `pages/api/intelligent-planner/get-data.js`, `generate-new-orders.js`

**Co siƒô dzieje:**
- Ka≈ºda wizyta ma `technicianId` i `technicianName`
- System filtruje wizyty dla konkretnego pracownika
- Pokazuje imiƒô pracownika przy wizytach

**Potrzebne dane:**
- ‚úÖ ID pracownika (do przypisania)
- ‚úÖ Imiƒô pracownika (do wy≈õwietlenia)

---

### G. Admin Panel (obecnie)
**Plik:** `pages/admin.js` (zak≈Çadka "Pracownicy")

**Co siƒô dzieje:**
- Lista wszystkich pracownik√≥w
- Filtrowanie (imiƒô, email, specjalizacja, status)
- PodglƒÖd szczeg√≥≈Ç√≥w
- Edycja pracownika (podstawowe dane)
- Usuwanie pracownika

**Braki obecnego panelu:**
- ‚ùå Brak edycji czas√≥w napraw
- ‚ùå Brak edycji czas√≥w zabudowy ‚≠ê **NOWO POTRZEBNE!**
- ‚ùå Brak zarzƒÖdzania specjalizacjami AGD
- ‚ùå Brak zarzƒÖdzania pojazdem
- ‚ùå Brak zarzƒÖdzania wyposa≈ºeniem
- ‚ùå Brak statystyk wydajno≈õci
- ‚ùå Brak zarzƒÖdzania certyfikatami
- ‚ùå Brak obszaru dzia≈Çania (mapa)

---

## 3Ô∏è‚É£ CO MUSI BYƒÜ W NOWYM PANELU

### üéØ LISTA FUNKCJONALNO≈öCI (PRIORYTETY)

#### ‚≠ê MUST-HAVE (Absolutnie potrzebne)
1. **Lista pracownik√≥w** z sortowaniem i filtrowaniem
2. **Dodawanie nowego pracownika** (pe≈Çny formularz)
3. **Edycja podstawowych danych:**
   - Imiƒô i nazwisko
   - Email
   - Telefon
   - Adres
   - Godziny pracy (workingHours)
   - Do≈õwiadczenie
   - Status aktywno≈õci (isActive)

4. **Edycja specjalizacji:**
   - Lista specjalizacji og√≥lnych (Serwis AGD, Naprawa pralek)
   - Specjalizacje AGD (devices: pralka, lod√≥wka, etc.)
   - Marki (Samsung, LG, Bosch)
   - Poziom do≈õwiadczenia (beginner/advanced/expert)
   - Lata do≈õwiadczenia

5. **Edycja czas√≥w napraw** ‚ö° KRYTYCZNE
   - Wszystkie typy urzƒÖdze≈Ñ (pralka, lod√≥wka, zmywarka, etc.)
   - Mo≈ºliwo≈õƒá ustawienia indywidualnych czas√≥w
   - PodglƒÖd domy≈õlnych czas√≥w

6. **Edycja czas√≥w pracy z zabudowƒÖ** ‚ö° NOWE!
   - Demonta≈º (min)
   - Monta≈º (min)
   - Trudna zabudowa (min)

7. **Usuwanie pracownika** (soft delete - zmiana isActive)

8. **Pobieranie z API:** `GET /api/employees`
9. **Zapisywanie do API:** `POST /api/employees` (dodawanie), `PUT /api/employees` (edycja)

---

#### ‚öôÔ∏è SHOULD-HAVE (Bardzo przydatne)
10. **Obszar dzia≈Çania:**
    - Miasto g≈Ç√≥wne
    - Promie≈Ñ dzia≈Çania (km)
    - Preferowane dzielnice
    - Strefy kt√≥rych unika

11. **Statystyki wydajno≈õci:**
    - Wykonane zlecenia (completedJobs)
    - Ocena (rating)
    - ≈öredni czas naprawy
    - Wsp√≥≈Çczynnik punktualno≈õci
    - Satysfakcja klient√≥w

12. **Dostƒôpno≈õƒá:**
    - Urlop (dni wykorzystane/pozosta≈Çe)
    - Nadgodziny (max/wykorzystane)
    - Dostƒôpno≈õƒá w nag≈Çych przypadkach

13. **Pojazd:**
    - Marka, model
    - Nr rejestracyjny
    - Przebieg
    - Data nastƒôpnego serwisu

---

#### üé® NICE-TO-HAVE (Dodatkowe udogodnienia)
14. **Certyfikaty:**
    - Lista certyfikat√≥w
    - Daty wa≈ºno≈õci
    - Przypomnienia o wygasajƒÖcych

15. **Wyposa≈ºenie:**
    - Lista narzƒôdzi
    - Warto≈õƒá wyposa≈ºenia
    - Data ostatniej inwentaryzacji

16. **Wizualizacje:**
    - Mapa obszaru dzia≈Çania
    - Wykresy wydajno≈õci
    - Timeline aktywno≈õci

17. **Historia zmian:**
    - Kto i kiedy edytowa≈Ç
    - Log zmian w profilu

---

## 4Ô∏è‚É£ API ENDPOINTS POTRZEBNE

### IstniejƒÖce:
```javascript
‚úÖ GET  /api/employees              // Lista wszystkich pracownik√≥w
‚úÖ POST /api/employees              // Dodaj nowego pracownika
‚ùå PUT  /api/employees/:id          // Aktualizuj pracownika (BRAK!)
‚ùå DELETE /api/employees/:id        // Usu≈Ñ pracownika (BRAK!)
```

### DO DODANIA:
```javascript
PUT  /api/employees/:id             // Aktualizacja pracownika
DELETE /api/employees/:id           // Usuniƒôcie (soft delete)
PUT  /api/employees/:id/times       // Aktualizacja czas√≥w napraw
PUT  /api/employees/:id/built-in-times  // Aktualizacja czas√≥w zabudowy ‚≠ê NOWE
GET  /api/employees/:id/stats       // Statystyki pracownika
GET  /api/employees/:id/assignments // Zlecenia pracownika
```

---

## 5Ô∏è‚É£ STRUKTURA FORMULARZA EDYCJI

### Zak≈Çadki/Sekcje:

#### üìù Sekcja 1: PODSTAWOWE DANE
- Imiƒô i nazwisko *
- Email
- Telefon *
- Adres
- Godziny pracy (workingHours) np. "8:00-16:00"
- Do≈õwiadczenie (lata)
- Status: Aktywny / Nieaktywny

#### üîß Sekcja 2: SPECJALIZACJE
- **Specjalizacje og√≥lne** (multi-select)
  - Serwis AGD
  - Naprawa pralek
  - Ch≈Çodnictwo
  - Elektronika
  
- **Specjalizacje AGD** (rozwijane)
  - Typ urzƒÖdzenia (pralka, lod√≥wka, etc.)
  - Marki (Samsung, LG, Bosch)
  - Lata do≈õwiadczenia w tym urzƒÖdzeniu
  - Poziom: Beginner / Advanced / Expert
  - Certyfikaty (lista)

#### ‚è±Ô∏è Sekcja 3: CZASY NAPRAW ‚ö° KRYTYCZNE
Grid z wszystkimi urzƒÖdzeniami:

| UrzƒÖdzenie | Czas domy≈õlny | Czas pracownika | Akcje |
|------------|---------------|-----------------|-------|
| Pralka | 30 min | 29 min | üìù |
| Lod√≥wka | 40 min | 34 min | üìù |
| Zmywarka | 35 min | 38 min | üìù |
| ... | ... | ... | ... |

**Funkcje:**
- Edycja inline lub modal
- Reset do domy≈õlnych warto≈õci
- Kopiuj czasy z innego pracownika

#### üè† Sekcja 4: CZASY ZABUDOWY ‚≠ê NOWE!
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Demonta≈º zabudowy:    [10] min  ‚îÇ
‚îÇ Monta≈º zabudowy:      [10] min  ‚îÇ
‚îÇ Trudna zabudowa:      [30] min  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

Wskaz√≥wka: "Te czasy sƒÖ dodawane do czasu bazowego naprawy gdy urzƒÖdzenie jest zabudowane"

#### üìç Sekcja 5: OBSZAR DZIA≈ÅANIA
- Miasto g≈Ç√≥wne *
- Promie≈Ñ dzia≈Çania (km): slider 0-100
- Preferowane dzielnice (multi-select lub input)
- Strefy kt√≥rych unika (input)
- Preferuje: Minimize czas | Maximize liczba wizyt

#### üìä Sekcja 6: STATYSTYKI (read-only)
Karty z numerami:
- Wykonane zlecenia: 245
- Ocena: ‚≠ê 4.8
- ≈öredni czas naprawy: 139 min
- Punktualno≈õƒá: 98%
- Satysfakcja klient√≥w: 4.7/5

#### üöó Sekcja 7: POJAZD
- Marka, Model
- Rok produkcji
- Nr rejestracyjny
- Paliwo: Diesel / Benzyna / Elektryczny / Hybryda
- Pojemno≈õƒá (m¬≥)
- Przebieg (km)
- Data nastƒôpnego serwisu
- Cechy (Klimatyzacja, Rega≈Çy, LED, Gniazdka 230V)

#### üéì Sekcja 8: CERTYFIKATY
Lista certyfikat√≥w:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üéì Uprawnienia elektryczne do 1kV       ‚îÇ
‚îÇ    Wydawca: UDT                          ‚îÇ
‚îÇ    Wa≈ºny do: 2026-05-15 ‚úÖ               ‚îÇ
‚îÇ    [Edytuj] [Usu≈Ñ]                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ + Dodaj nowy certyfikat                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### üìÖ Sekcja 9: DOSTƒòPNO≈öƒÜ
- Dni urlopu: Wykorzystane [0] / Razem [26]
- Zaplanowane urlopy: [Lista dat]
- Nadgodziny: Wykorzystane w tym tygodniu [5] / Max [10]
- Dostƒôpny w nag≈Çych przypadkach: ‚òëÔ∏è Tak

---

## 6Ô∏è‚É£ DESIGN/UI REKOMENDACJE

### Styl wizualny:
- **Modern Material Design** (jak Google Admin)
- Karty z cieniami
- Przyjazne kolory (niebieskie, zielone)
- Responsywny (dzia≈Ça na mobile)
- Animacje przej≈õƒá

### Layout:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üè† Dashboard > Pracownicy > Jan Kowalski          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ Podst.   ‚îÇ Specj.   ‚îÇ Czasy    ‚îÇ Obszar   ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ dane     ‚îÇ          ‚îÇ napraw   ‚îÇ          ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  [Zawarto≈õƒá aktywnej zak≈Çadki]                     ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ [Anuluj]          [Zapisz] [Zapisz i zamknij]‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Komponenty:
- Tabs (zak≈Çadki) na g√≥rze
- Scroll w content area
- Fixed header z nazwƒÖ pracownika i awatarem
- Sticky footer z przyciskami akcji
- Loading states (skeleton screens)
- Success/Error notifications (toast)

---

## 7Ô∏è‚É£ WALIDACJA I LOGIKA

### Walidacja formularza:
- **Imiƒô i nazwisko:** Wymagane, min 3 znaki
- **Telefon:** Wymagany, format +48 XXX XXX XXX
- **Email:** Opcjonalny, ale je≈õli podany - musi byƒá unikalny
- **workingHours:** Format "HH:MM-HH:MM"
- **Czasy napraw:** MuszƒÖ byƒá > 0
- **Obszar dzia≈Çania:** Promie≈Ñ 1-100 km

### Zapisywanie:
1. Waliduj dane
2. Poka≈º loading
3. PUT /api/employees/:id
4. Je≈õli success:
   - Toast: "Pracownik zaktualizowany"
   - Opcjonalnie: Wr√≥ƒá do listy
5. Je≈õli error:
   - Toast: "B≈ÇƒÖd: {message}"
   - Pozosta≈Ñ w formularzu

### Porzucanie zmian:
- Je≈õli sƒÖ niezapisane zmiany:
  - Modal: "Masz niezapisane zmiany. Czy na pewno chcesz wyj≈õƒá?"
  - [Anuluj] [Wyjd≈∫ bez zapisywania]

---

## 8Ô∏è‚É£ NOWY PLIK DO STWORZENIA

### Nazwa: `pages/admin/pracownicy.js`

**Struktura:**
```javascript
import { useState, useEffect } from 'react';
import { FiEdit, FiTrash2, FiPlus, FiSearch, FiFilter } from 'react-icons/fi';

export default function AdminPracownicy() {
  // States
  const [employees, setEmployees] = useState([]);
  const [filteredEmployees, setFilteredEmployees] = useState([]);
  const [selectedEmployee, setSelectedEmployee] = useState(null);
  const [showEditModal, setShowEditModal] = useState(false);
  const [showAddModal, setShowAddModal] = useState(false);
  const [activeTab, setActiveTab] = useState('basic'); // basic, specs, times, area, etc.
  
  // Filters
  const [filters, setFilters] = useState({
    search: '',
    specialization: '',
    isActive: 'all'
  });
  
  // API calls
  const loadEmployees = async () => { ... }
  const saveEmployee = async (employeeData) => { ... }
  const deleteEmployee = async (id) => { ... }
  
  // Render components
  return (
    <div>
      {/* Header */}
      {/* Filters */}
      {/* Lista pracownik√≥w */}
      {/* Modal edycji */}
    </div>
  );
}
```

---

## 9Ô∏è‚É£ HARMONOGRAM IMPLEMENTACJI

### Faza 1: PODSTAWY (1 dzie≈Ñ)
- ‚úÖ Utworzenie `pages/admin/pracownicy.js`
- ‚úÖ Lista pracownik√≥w (fetch z API)
- ‚úÖ Filtrowanie i wyszukiwanie
- ‚úÖ Modal podglƒÖdu szczeg√≥≈Ç√≥w

### Faza 2: EDYCJA PODSTAWOWA (1 dzie≈Ñ)
- ‚úÖ Formularz edycji (zak≈Çadka "Podstawowe dane")
- ‚úÖ Endpoint PUT /api/employees/:id
- ‚úÖ Zapisywanie zmian
- ‚úÖ Walidacja

### Faza 3: CZAS√ìW NAPRAW ‚ö° PRIORYTET (0.5 dnia)
- ‚úÖ Zak≈Çadka "Czasy napraw"
- ‚úÖ Grid z edycjƒÖ czas√≥w
- ‚úÖ **Zak≈Çadka "Czasy zabudowy"** ‚≠ê NOWE!
- ‚úÖ Zapisywanie do `repairTimes` i `builtInWorkTimes`

### Faza 4: SPECJALIZACJE (1 dzie≈Ñ)
- ‚úÖ Zak≈Çadka "Specjalizacje"
- ‚úÖ Edycja specjalizacji og√≥lnych
- ‚úÖ Edycja specjalizacji AGD
- ‚úÖ ZarzƒÖdzanie certyfikatami

### Faza 5: OBSZAR I STATYSTYKI (1 dzie≈Ñ)
- ‚úÖ Zak≈Çadka "Obszar dzia≈Çania"
- ‚úÖ Zak≈Çadka "Statystyki" (read-only)
- ‚úÖ Zak≈Çadka "Pojazd"
- ‚úÖ Zak≈Çadka "Dostƒôpno≈õƒá"

### Faza 6: DODAWANIE PRACOWNIKA (0.5 dnia)
- ‚úÖ Modal dodawania
- ‚úÖ Endpoint POST /api/employees
- ‚úÖ Generowanie domy≈õlnych warto≈õci

### Faza 7: POLISH & UX (0.5 dnia)
- ‚úÖ Animacje
- ‚úÖ Loading states
- ‚úÖ Error handling
- ‚úÖ Toast notifications
- ‚úÖ Responsive design

---

## üéØ PODSUMOWANIE

### Co jest NAJBARDZIEJ potrzebne:
1. **Edycja czas√≥w napraw** - u≈ºywane przez system czasu wizyt
2. **Edycja czas√≥w zabudowy** ‚≠ê **NOWO DODANE!** - u≈ºywane przy obliczaniu czasu wizyty
3. **Edycja specjalizacji** - u≈ºywane przez system przydzia≈Çu
4. **Edycja godzin pracy** - u≈ºywane przez kalendarz
5. **Edycja podstawowych danych** - kontakt, adres

### Co mo≈ºe poczekaƒá:
- Pojazd (nice to have)
- Wyposa≈ºenie (nice to have)
- Historia zmian (nice to have)
- Wizualizacje (nice to have)

### Kluczowe decyzje:
1. **Jeden du≈ºy modal z zak≈Çadkami** vs **Osobna strona edycji**
   - Rekomendacja: **Osobna strona** (wiƒôcej miejsca, lepszy UX)

2. **Inline editing** vs **Modal editing** dla czas√≥w
   - Rekomendacja: **Modal** (wiƒôcej kontroli, lepszy UX)

3. **Auto-save** vs **Explicit save**
   - Rekomendacja: **Explicit save** (wiƒôcej kontroli, mniej b≈Çƒôd√≥w)

---

## üì¶ ZALE≈ªNO≈öCI DO DODANIA

```bash
# Je≈õli nie ma:
npm install react-hot-toast       # Notyfikacje
npm install react-select          # Lepsze multi-selecty
npm install react-datepicker      # Wyb√≥r dat
npm install recharts              # Wykresy (opcjonalnie)
```

---

## ‚úÖ CHECKLIST PRZED ROZPOCZƒòCIEM

- [ ] Zrozumienie struktury `employees.json`
- [ ] Sprawdzenie API endpoints
- [ ] Przygotowanie design mockup√≥w
- [ ] Setup nowego pliku `pages/admin/pracownicy.js`
- [ ] Stworzenie komponent√≥w reu≈ºywalnych
- [ ] Dodanie endpoints do API (PUT, DELETE)
- [ ] Testy podstawowe

---

**Ostatnia aktualizacja:** 2 pa≈∫dziernika 2025
**Autor analizy:** AI Assistant
**Status:** Ready for implementation üöÄ
